# configs/process.yml
# Main processing configuration with multi-scale support

project_dir: "."

# Multiple hex grids for multi-scale analysis
# Scales from 100 ha to 100,000 ha (larger than FIA's 46,000 ha)
hex_grids:
  - name: "fia"
    path: "data/hex/hex_grid.geojson"
    layer: null

  - name: "100ha"
    path: "data/hex/hex_grid_100ha.geojson"
    layer: null

  - name: "500ha"
    path: "data/hex/hex_grid_500ha.geojson"
    layer: null

  - name: "1kha"
    path: "data/hex/hex_grid_1kha.geojson"
    layer: null

  - name: "5kha"
    path: "data/hex/hex_grid_5kha.geojson"
    layer: null

  - name: "10kha"
    path: "data/hex/hex_grid_10kha.geojson"
    layer: null

  - name: "50kha"
    path: "data/hex/hex_grid_50kha.geojson"
    layer: null

  - name: "100kha"
    path: "data/hex/hex_grid_100kha.geojson"
    layer: null

# Settings for creating hex grids (used by --create-hex)
hex_creation_settings:
  area_ha_list: [100, 500, 1000, 5000, 10000, 50000, 100000]
  clip_to: "data/hex/hex_grid.geojson"  # Use FIA grid as boundary
  exclude_water: "data/hex/Waterbodies_FeaturesToJSON.geojson"
  buffer_km: 0  # No buffer when clipping to existing grid

# Default grid for initial plot assignment
hex_path: "data/hex/hex_grid.geojson"
hex_layer: null

# Choose metric: aglb, carbon, mortality, growth, regeneration
metric: "aglb"

# Metric-specific parameters
metric_params:
  carbon_fraction: 0.5
  dbh_sapling: 2.5
  dbh_tree: 5.0

# Updated processing years (annual FIA stable period)
years: [2020, 2021, 2022, 2023, 2024]
level_window: 5

# Monte Carlo settings
mc_reps: 61              # Number of jitter replicates
jitter_radius_m: 1609.34  # ~1 mile

# Jitter constraints
mask:
  use_hex_union: true
  use_state_constraint: true
  state_geo_path: "data/boundaries/states_5070.geojson"
  state_field: "STATEFP"
  max_reroll: 10

# Run ID (auto-generated if null)
run_id: null
