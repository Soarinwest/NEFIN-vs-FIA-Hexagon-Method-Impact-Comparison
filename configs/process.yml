# configs/process.yml
# Main configuration for FIA-NEFIN comparison pipeline
# Updated: Multi-period support and jitter configuration

# =============================================================================
# TEMPORAL CONFIGURATION
# =============================================================================

# Define multiple analysis periods
# Each period will be processed separately and results compared
analysis_periods:
  - name: "2020-2024"
    years: [2020, 2021, 2022, 2023, 2024]
    label: "recent"
  - name: "2015-2019"
    years: [2015, 2016, 2017, 2018, 2019]
    label: "historical"

# Default period (for backwards compatibility with single-period runs)
# This is used when running without --multi-period flag
years: [2020, 2021, 2022, 2023, 2024]

# Window size for temporal aggregation (years)
level_window: 5

# =============================================================================
# MONTE CARLO JITTER CONFIGURATION
# =============================================================================

# Number of jitter replicates for positional uncertainty estimation
# Recommended: 61-100 for stable estimates, 200+ for publication-quality
# WARNING: Increasing this significantly increases processing time
mc_reps: 100

# Jitter radius in meters (FIA uses ~1 mile = 1609.34m)
jitter_radius_m: 1609.34

# =============================================================================
# HEX GRID CONFIGURATION
# =============================================================================

# Metric to compute (aglb = aboveground live biomass)
metric: aglb

# Hex grids to process (name must match file suffix)
# Order: smallest to largest for logical progression
hex_grids:
  - name: 100ha
    path: data/hex/hex_grid_100ha.geojson
  - name: 500ha
    path: data/hex/hex_grid_500ha.geojson
  - name: 1kha
    path: data/hex/hex_grid_1kha.geojson
  - name: 5kha
    path: data/hex/hex_grid_5kha.geojson
  - name: 10kha
    path: data/hex/hex_grid_10kha.geojson
  - name: 50kha
    path: data/hex/hex_grid_50kha.geojson
  - name: 64kha
    path: data/hex/hex_grid.geojson
  - name: 100kha
    path: data/hex/hex_grid_100kha.geojson

# =============================================================================
# PROCESSING OPTIONS
# =============================================================================

# Project directory (usually current directory)
project_dir: "."

# Whether to include NEFIN comparison
include_nefin: true

# Minimum plots required for reliable hex estimates
min_plots_per_hex: 1

# Target plots for "good" FIA coverage (used in weighting)
target_plots_per_hex: 3

# =============================================================================
# OUTPUT CONFIGURATION
# =============================================================================

# Base directory for run outputs
runs_dir: "runs"

# Consolidate results across scales
consolidate_results: true

# Generate visualizations automatically
auto_visualize: true
